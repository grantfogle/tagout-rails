<% draw_results.each do |hunt_code, data| %>
    <%# Resident Row - show if no filter or resident filter %>
    <% if filters[:resident].nil? || filters[:resident] == true %>
        <tr class="resident-row" data-hunt-code="<%= hunt_code %>">
            <td class="sticky-col sticky-col--code"><%= hunt_code %></td>
            <td class="sticky-col sticky-col--unit"><%= data[:unit] %></td>
            <td class="sticky-col sticky-col--status">
                <span class="status-badge status-badge--resident">R</span>
            </td>
            <% max_points.downto(0).each do |pts| %>
                <% cell = data[:resident][:pref][pts] %>
                <td class="draw-cell <%= cell_class(cell) %>">
                    <% if cell && cell[:applicants] && cell[:applicants] > 0 %>
                        <div class="draw-cell__odds"><%= display_odds(cell) %></div>
                        <div class="draw-cell__ratio"><%= cell[:success] %>/<%= cell[:applicants] %></div>
                    <% else %>
                        <span class="draw-cell__empty">—</span>
                    <% end %>
                </td>
            <% end %>
            <% [2, 3, 4].each do |choice| %>
                <% cell = data[:resident][:choice][choice] %>
                <td class="draw-cell choice-cell <%= cell_class(cell) %>">
                    <% if cell && cell[:applicants] && cell[:applicants] > 0 %>
                        <div class="draw-cell__odds"><%= display_odds(cell) %></div>
                        <div class="draw-cell__ratio"><%= cell[:success] %>/<%= cell[:applicants] %></div>
                    <% else %>
                        <span class="draw-cell__empty">—</span>
                    <% end %>
                </td>
            <% end %>
        </tr>
    <% end %>
    
    <%# Non-Resident Row - show if no filter or non-resident filter %>
    <% if filters[:resident].nil? || filters[:resident] == false %>
        <tr class="nonresident-row" data-hunt-code="<%= hunt_code %>">
            <td class="sticky-col sticky-col--code"><%= hunt_code %></td>
            <td class="sticky-col sticky-col--unit"><%= data[:unit] %></td>
            <td class="sticky-col sticky-col--status">
                <span class="status-badge status-badge--nonresident">NR</span>
            </td>
            <% max_points.downto(0).each do |pts| %>
                <% cell = data[:nonresident][:pref][pts] %>
                <td class="draw-cell <%= cell_class(cell) %>">
                    <% if cell && cell[:applicants] && cell[:applicants] > 0 %>
                        <div class="draw-cell__odds"><%= display_odds(cell) %></div>
                        <div class="draw-cell__ratio"><%= cell[:success] %>/<%= cell[:applicants] %></div>
                    <% else %>
                        <span class="draw-cell__empty">—</span>
                    <% end %>
                </td>
            <% end %>
            <% [2, 3, 4].each do |choice| %>
                <% cell = data[:nonresident][:choice][choice] %>
                <td class="draw-cell choice-cell <%= cell_class(cell) %>">
                    <% if cell && cell[:applicants] && cell[:applicants] > 0 %>
                        <div class="draw-cell__odds"><%= display_odds(cell) %></div>
                        <div class="draw-cell__ratio"><%= cell[:success] %>/<%= cell[:applicants] %></div>
                    <% else %>
                        <span class="draw-cell__empty">—</span>
                    <% end %>
                </td>
            <% end %>
        </tr>
    <% end %>
<% end %>
